(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4834],{13619:(e,r,t)=>{"use strict";t.d(r,{E:()=>n});var s=t(95155);t(12115);var a=t(74466),o=t(19433);let i=(0,a.F)("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function n(e){let{className:r,variant:t,...a}=e;return(0,s.jsx)("div",{className:(0,o.cn)(i({variant:t}),r),...a})}},13800:(e,r,t)=>{"use strict";t.d(r,{BT:()=>d,Wu:()=>c,ZB:()=>l,Zp:()=>i,aR:()=>n});var s=t(95155),a=t(12115),o=t(19433);let i=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)("div",{ref:r,className:(0,o.cn)("rounded-xl border bg-card text-card-foreground shadow",t),...a})});i.displayName="Card";let n=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)("div",{ref:r,className:(0,o.cn)("flex flex-col space-y-1.5 p-6",t),...a})});n.displayName="CardHeader";let l=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)("div",{ref:r,className:(0,o.cn)("font-semibold leading-none tracking-tight",t),...a})});l.displayName="CardTitle";let d=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)("div",{ref:r,className:(0,o.cn)("text-sm text-muted-foreground",t),...a})});d.displayName="CardDescription";let c=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)("div",{ref:r,className:(0,o.cn)("p-6 pt-0",t),...a})});c.displayName="CardContent",a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)("div",{ref:r,className:(0,o.cn)("flex items-center p-6 pt-0",t),...a})}).displayName="CardFooter"},19433:(e,r,t)=>{"use strict";t.d(r,{cn:()=>o});var s=t(52596),a=t(39688);function o(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return(0,a.QP)((0,s.$)(r))}},21978:(e,r,t)=>{"use strict";t.d(r,{$:()=>d});var s=t(95155),a=t(12115),o=t(99708),i=t(74466),n=t(19433);let l=(0,i.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),d=a.forwardRef((e,r)=>{let{className:t,variant:a,size:i,asChild:d=!1,...c}=e,m=d?o.DX:"button";return(0,s.jsx)(m,{className:(0,n.cn)(l({variant:a,size:i,className:t})),ref:r,...c})});d.displayName="Button"},31670:(e,r,t)=>{"use strict";t.d(r,{A:()=>s});let s="https://back.digimediamkt.com"},49295:(e,r,t)=>{"use strict";t.d(r,{w:()=>n});var s=t(95155),a=t(12115),o=t(87489),i=t(19433);let n=a.forwardRef((e,r)=>{let{className:t,orientation:a="horizontal",decorative:n=!0,...l}=e;return(0,s.jsx)(o.b,{ref:r,decorative:n,orientation:a,className:(0,i.cn)("shrink-0 bg-border","horizontal"===a?"h-[1px] w-full":"h-full w-[1px]",t),...l})});n.displayName=o.b.displayName},50350:(e,r,t)=>{"use strict";t.d(r,{p:()=>i});var s=t(95155),a=t(12115),o=t(19433);let i=a.forwardRef((e,r)=>{let{className:t,type:a,...i}=e;return(0,s.jsx)("input",{type:a,className:(0,o.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:r,...i})});i.displayName="Input"},55988:(e,r,t)=>{"use strict";t.d(r,{A:()=>l});var s=t(31670),a=t(79971);let o="".concat(s.A,"/api"),i=function(e,r){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s={path:"/",maxAge:86400,sameSite:"lax",...t};if("user"===e&&r&&"object"==typeof r){let t={id:r.id,name:r.name,email:r.email};(0,a.setCookie)(e,JSON.stringify(t),s);return}if("empleado"===e&&r&&"object"==typeof r){let t={id_empleado:r.id_empleado,nombre:r.nombre,apellido:r.apellido,email:r.email,id_rol:r.id_rol};(0,a.setCookie)(e,JSON.stringify(t),s);return}if("subtipoAdmin"===e&&r&&"object"==typeof r){let t={description:r.description,hierarchy:r.hierarchy};(0,a.setCookie)(e,JSON.stringify(t),s);return}let o="object"==typeof r?JSON.stringify(r):r;(0,a.setCookie)(e,o,s)},n={register:async e=>{try{let r=await fetch("".concat(o,"/register"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),t=await r.json();if(!r.ok)throw Error(t.message||"Error en el registro");return t.user&&(0,a.setCookie)("user",JSON.stringify(t.user),{maxAge:86400}),t}catch(e){return console.error("Error en registro:",e),{error:!0,message:e.message}}},login:async e=>{try{let r=await fetch("".concat(o,"/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),t=await r.json();if(console.log("Usuario autenticado: \n",t),!r.ok)throw Error(t.message||"Error en la autenticaci\xf3n");return i("token",t.token),i("user",t.user),t.empleado&&i("empleado",t.empleado),t.rol&&i("rol",t.rol),t.permisos&&i("permisos",t.permisos),t.empleado.subtipo_admin&&i("subtipoAdmin",t.empleado.subtipo_admin),t}catch(e){throw console.error("Error en login:",e),e}},logout:async()=>{try{let e=(0,a.getCookie)("token");if(!e)return{success:!0};let r=await fetch("".concat(o,"/logout"),{method:"POST",headers:{authorization:"Bearer ".concat(e)}}),t=await r.json();if(!r.ok)throw Error(t.message||"Error al cerrar sesi\xf3n");return n.clearAuthCookies(),t}catch(e){return console.error("Error en logout:",e),n.clearAuthCookies(),{error:!0,message:e.message}}},me:async()=>{try{let e=(0,a.getCookie)("token");if(!e)return null;let r=await fetch("".concat(o,"/me"),{method:"GET",headers:{authorization:"Bearer ".concat(e)}}),t=await r.json();if(!r.ok)throw 401===r.status&&n.clearAuthCookies(),Error(t.message||"Error al obtener informaci\xf3n del usuario");return t.user&&i("user",t.user),t.empleado&&i("empleado",t.empleado),t.rol&&i("rol",t.rol),t.permisos&&i("permisos",t.permisos),t}catch(e){return console.error("Error al obtener informaci\xf3n del usuario:",e),{error:!0,message:e.message}}},logoutClient:e=>{n.clearAuthCookies(),e&&e.push("/login")},clearAuthCookies:()=>{(0,a.deleteCookie)("token"),(0,a.deleteCookie)("user"),(0,a.deleteCookie)("empleado"),(0,a.deleteCookie)("rol"),(0,a.deleteCookie)("permisos"),(0,a.deleteCookie)("subtipoAdmin")},getCurrentUser:()=>{let e=(0,a.getCookie)("user");try{if(e)return"string"==typeof e?JSON.parse(e):e;return null}catch(e){return console.error("Error parsing user cookie:",e),null}},getCurrentEmpleado:()=>{let e=(0,a.getCookie)("empleado");try{if(e)return"string"==typeof e?JSON.parse(e):e;return null}catch(e){return console.error("Error parsing empleado cookie:",e),null}},getCurrentSubtipoAdmin:()=>{let e=(0,a.getCookie)("subtipoAdmin");try{if(e)return"string"==typeof e?JSON.parse(e):e;return null}catch(e){return console.error("Error parsing empleado cookie:",e),null}},getCurrentRole:()=>(0,a.getCookie)("rol")||null,getCurrentPermissions:()=>{let e=(0,a.getCookie)("permisos");try{return e?JSON.parse(e):[]}catch(e){return[]}},getToken:()=>(0,a.getCookie)("token"),hasRole:e=>{let r=n.getCurrentRole();return!!r&&r.toLowerCase()===e.toLowerCase()},hasPermission:e=>n.getCurrentPermissions().includes(e),hasAnyPermission:e=>{let r=n.getCurrentPermissions();return e.some(e=>r.includes(e))},isAdmin:()=>n.hasRole("administrador"),isAuthenticated:()=>!!(0,a.getCookie)("token"),refreshAuthData:async()=>await n.me(),isVerifiedAccount:()=>{let e=n.getCurrentUser();return(null==e?void 0:e.email)==="tmlighting@hotmail.com"}},l=n},61668:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>Q});var s=t(95155),a=t(12115),o=t(75074),i=t(18046),n=t(10518),l=t(44956),d=t(73672),c=t(45731),m=t(50286),u=t(31573),f=t(59119),p=t(9572),x=t(93249),h=t(21978),g=t(13800),y=t(14885),b=t(19433);let v=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)(y.bL,{ref:r,className:(0,b.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary shadow focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",t),...a,children:(0,s.jsx)(y.C1,{className:(0,b.cn)("flex items-center justify-center text-current"),children:(0,s.jsx)(n.A,{className:"h-4 w-4"})})})});v.displayName=y.bL.displayName;var N=t(50350),w=t(70466),j=t(49295),k=t(13619);let A=0,C=new Map,E=e=>{if(C.has(e))return;let r=setTimeout(()=>{C.delete(e),O({type:"REMOVE_TOAST",toastId:e})},1e6);C.set(e,r)},S=(e,r)=>{switch(r.type){case"ADD_TOAST":return{...e,toasts:[r.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===r.toast.id?{...e,...r.toast}:e)};case"DISMISS_TOAST":{let{toastId:t}=r;return t?E(t):e.toasts.forEach(e=>{E(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===t||void 0===t?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===r.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==r.toastId)}}},R=[],T={toasts:[]};function O(e){T=S(T,e),R.forEach(e=>{e(T)})}function _(e){let{...r}=e,t=(A=(A+1)%Number.MAX_SAFE_INTEGER).toString(),s=()=>O({type:"DISMISS_TOAST",toastId:t});return O({type:"ADD_TOAST",toast:{...r,id:t,open:!0,onOpenChange:e=>{e||s()}}}),{id:t,dismiss:s,update:e=>O({type:"UPDATE_TOAST",toast:{...e,id:t}})}}function P(){let[e,r]=a.useState(T);return a.useEffect(()=>(R.push(r),()=>{let e=R.indexOf(r);e>-1&&R.splice(e,1)}),[e]),{...e,toast:_,dismiss:e=>O({type:"DISMISS_TOAST",toastId:e})}}var I=t(55988),z=t(31670);let D="".concat(z.A,"/api"),L=()=>I.A.getToken(),J=async e=>{if(!e.ok)throw Error((await e.json().catch(()=>({}))).message||"Error: ".concat(e.status));return await e.json().catch(()=>({}))},V={getRoles:async()=>{try{let e=I.A.getToken();if(!e)throw Error("No hay token de autenticaci\xf3n");let r=await fetch("".concat(D,"/roles"),{headers:{Authorization:"Bearer ".concat(e)}}),t=await J(r),s=[];return Array.isArray(t)?s=t:t&&Array.isArray(t.roles)?s=t.roles:t&&Array.isArray(t.data)&&(s=t.data),console.log("Roles obtenidos:",s),s}catch(e){return console.error("Error al obtener roles:",e),[]}},getPermisos:async()=>{try{let e=L();if(!e)throw Error("No hay token de autenticaci\xf3n");let r=await fetch("".concat(D,"/permisos"),{headers:{Authorization:"Bearer ".concat(e)}}),t=await J(r),s=[];return Array.isArray(t)?s=t:t&&Array.isArray(t.permisos)?s=t.permisos:t&&Array.isArray(t.data)&&(s=t.data),{permisos:s}}catch(e){return console.error("Error al obtener permisos:",e),{permisos:[]}}},getPermisosDelRol:async e=>{try{if(!e)throw Error("ID de rol no proporcionado");let r=L();if(!r)throw Error("No hay token de autenticaci\xf3n");let t=await fetch("".concat(D,"/roles/").concat(e,"/permisos"),{headers:{Authorization:"Bearer ".concat(r)}}),s=await J(t);console.log("Permisos del rol obtenidos:",s);let a=[];return Array.isArray(s)?a=s:s&&Array.isArray(s.permisos)?a=s.permisos:s&&Array.isArray(s.data)&&(a=s.data),{permisos:a}}catch(r){return console.error("Error al obtener permisos del rol ".concat(e,":"),r),{permisos:[]}}},syncPermisos:async(e,r)=>{try{if(!e)throw Error("ID de rol no proporcionado");let t=L();if(!t)throw Error("No hay token de autenticaci\xf3n");let s=Array.isArray(r)?r:[],a=await fetch("".concat(D,"/roles/").concat(e,"/permisos"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({permisos:s})});return await J(a)}catch(r){return console.error("Error al sincronizar permisos para el rol ".concat(e,":"),r),{success:!1,message:r.message}}}},F={"Ver ":{nombre:"Visualizaci\xf3n",icon:(0,s.jsx)(o.A,{className:"h-4 w-4"}),keywords:["Ver"]},"Crear ":{nombre:"Creaci\xf3n",icon:(0,s.jsx)(i.A,{className:"h-4 w-4"}),keywords:["Crear"]},"Editar ":{nombre:"Edici\xf3n",icon:(0,s.jsx)(n.A,{className:"h-4 w-4"}),keywords:["Editar"]},"Eliminar ":{nombre:"Eliminaci\xf3n",icon:(0,s.jsx)(l.A,{className:"h-4 w-4"}),keywords:["Eliminar"]},"Enviar ":{nombre:"Enviar",icon:(0,s.jsx)(d.A,{className:"h-4 w-4"}),keywords:["Enviar"]},other:{nombre:"Otras Operaciones",icon:(0,s.jsx)(c.A,{className:"h-4 w-4"})}};function B(){var e,r;let[t,i]=(0,a.useState)([]),[n,l]=(0,a.useState)([]),[d,y]=(0,a.useState)(null),[A,C]=(0,a.useState)([]),[E,S]=(0,a.useState)(""),[R,T]=(0,a.useState)("all"),[O,_]=(0,a.useState)(!0),[I,z]=(0,a.useState)(!1),{toast:D}=P(),L=(null==d?void 0:null===(e=d.nombre)||void 0===e?void 0:e.toLowerCase())==="administrador";(0,a.useEffect)(()=>{(async()=>{try{_(!0);let e=await V.getRoles();console.log("Roles obtenidos RolePManager:",e),i(e);let r=await V.getPermisos();l(r.permisos)}catch(e){console.error("Error fetching data:",e),D({title:"Error",description:"No se pudieron cargar los datos. Intente nuevamente.",variant:"destructive"})}finally{_(!1)}})()},[D]);let J=async e=>{try{_(!0);let r=t.find(r=>r.id_rol===parseInt(e));y(r);let s=await V.getPermisosDelRol(e);C(s&&s.permisos?s.permisos.map(e=>e.id_permiso):[])}catch(e){console.error("Error selecting role:",e),D({title:"Error",description:"No se pudieron cargar los permisos del rol.",variant:"destructive"}),C([])}finally{_(!1)}},B=e=>{L||C(r=>r.includes(e)?r.filter(r=>r!==e):[...r,e])},M=async()=>{if(d&&!L){if(0===A.length){D({title:"Error",description:"Debes seleccionar al menos un permiso antes de guardar.",variant:"destructive"});return}try{z(!0);let e=await V.syncPermisos(d.id_rol,A);D({title:"\xc9xito",description:e.message||"Permisos actualizados correctamente",variant:"default"})}catch(e){console.error("Error saving permissions:",e),D({title:"Error",description:"No se pudieron guardar los cambios.",variant:"destructive"})}finally{z(!1)}}},U=Array.isArray(n)?n.filter(e=>{if(!e||!e.nombre)return!1;let r=e.nombre.toLowerCase().includes((E||"").toLowerCase());if("all"===R)return r;let t=!1;for(let r in F)if("other"!==r&&e.nombre.startsWith(r)&&r===R){t=!0;break}if("other"===R){for(let r in t=!0,F)if("other"!==r&&e.nombre.startsWith(r)){t=!1;break}}return r&&t}):[],q=(()=>{if(!d)return{total:0,assigned:0,percentage:0};let e=n.length,r=A.length,t=Math.round(r/e*100);return{total:e,assigned:r,percentage:t}})();return(0,s.jsxs)(g.Zp,{className:"border-none shadow-md dark:bg-gray-800/95 dark:border dark:border-gray-700",children:[(0,s.jsx)(g.aR,{className:"bg-[#8c52ff] text-white pb-4",children:(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(g.ZB,{className:"text-xl md:text-2xl font-bold",children:"Gesti\xf3n de Roles y Permisos"}),(0,s.jsx)(g.BT,{className:"text-gray-100 mt-1",children:"Administra los permisos asignados a cada rol del sistema"})]}),(0,s.jsx)("div",{className:"bg-white/20 p-2 rounded-full",children:(0,s.jsx)(c.A,{className:"h-6 w-6"})})]})}),(0,s.jsx)(g.Wu,{className:"p-6",children:(0,s.jsxs)("div",{className:"grid gap-6",children:[(0,s.jsxs)("div",{className:"flex flex-col md:flex-row gap-4",children:[(0,s.jsxs)("div",{className:"w-full md:w-1/3",children:[(0,s.jsx)("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-1.5 block",children:"Seleccionar Rol"}),(0,s.jsxs)(w.l6,{disabled:O,onValueChange:J,children:[(0,s.jsx)(w.bq,{className:"w-full border-gray-300 dark:border-gray-600",children:(0,s.jsx)(w.yv,{placeholder:"Selecciona un rol..."})}),(0,s.jsx)(w.gC,{children:(0,s.jsxs)(w.s3,{children:[(0,s.jsx)(w.TR,{children:"Roles Disponibles"}),Array.isArray(t)&&t.length>0?t.map(e=>{var r;return(0,s.jsx)(w.eb,{value:String(e.id_rol),children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("span",{children:e.nombre}),(null===(r=e.nombre)||void 0===r?void 0:r.toLowerCase())==="administrador"&&(0,s.jsx)(k.E,{className:"ml-2 bg-[#4d2994] text-white text-xs",children:"Admin"})]})},e.id_rol)}):(0,s.jsx)(w.eb,{value:"no-roles",disabled:!0,children:"No hay roles disponibles"})]})})]})]}),d&&(0,s.jsx)("div",{className:"w-full md:w-2/3 bg-[#f0ebff] dark:bg-[#4d2994]/20 rounded-lg p-4",children:(0,s.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-2",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("h3",{className:"font-medium text-[#8c52ff] dark:text-[#a67dff] flex items-center",children:[(0,s.jsx)(m.A,{className:"h-4 w-4 mr-1.5"}),"Rol: ",(0,s.jsx)("span",{className:"font-bold ml-1",children:d.nombre})]}),(0,s.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-0.5",children:L?"Tiene acceso completo al sistema":"".concat(q.assigned," de ").concat(q.total," permisos asignados (").concat(q.percentage,"%)")})]}),L?(0,s.jsxs)(k.E,{className:"bg-[#4d2994] text-white flex items-center px-3 py-1",children:[(0,s.jsx)(u.A,{className:"h-3 w-3 mr-1"}),"Permisos Bloqueados"]}):(0,s.jsx)(h.$,{onClick:M,disabled:I||O,className:"bg-[#8c52ff] hover:bg-[#7a45e6] text-white",children:I?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(x.P.div,{animate:{rotate:360},transition:{duration:1,repeat:Number.POSITIVE_INFINITY,ease:"linear"},className:"mr-1.5",children:(0,s.jsx)(c.A,{className:"h-4 w-4"})}),"Guardando..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(f.A,{className:"h-4 w-4 mr-1.5"}),"Guardar Cambios"]})})]})})]}),d&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(j.w,{className:"my-2"}),(0,s.jsxs)("div",{className:"flex flex-col md:flex-row gap-4 items-start",children:[(0,s.jsx)("div",{className:"w-full md:w-1/4",children:(0,s.jsxs)("div",{className:"sticky top-4",children:[(0,s.jsxs)("h3",{className:"font-medium text-gray-700 dark:text-gray-300 mb-2 flex items-center",children:[(0,s.jsx)(p.A,{className:"h-4 w-4 mr-1.5"}),"Filtrar por Categor\xeda"]}),(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsxs)(h.$,{variant:"ghost",className:(0,b.cn)("w-full justify-start text-sm font-normal","all"===R&&"bg-[#f0ebff] text-[#8c52ff] dark:bg-[#4d2994]/20 dark:text-[#a67dff]"),onClick:()=>T("all"),children:[(0,s.jsx)(c.A,{className:"h-4 w-4 mr-2"}),"Todos los permisos"]}),Object.entries(F||{}).map(e=>{let[r,t]=e;return(0,s.jsxs)(h.$,{variant:"ghost",className:(0,b.cn)("w-full justify-start text-sm font-normal",R===r&&"bg-[#f0ebff] text-[#8c52ff] dark:bg-[#4d2994]/20 dark:text-[#a67dff]"),onClick:()=>T(r),children:[t.icon,(0,s.jsx)("span",{className:"ml-2",children:t.nombre})]},r)})]}),(0,s.jsx)(j.w,{className:"my-3"}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("h3",{className:"font-medium text-gray-700 dark:text-gray-300 mb-1 text-sm",children:"Estad\xedsticas"}),(0,s.jsxs)("div",{className:"bg-[#f0ebff] dark:bg-[#4d2994]/20 p-3 rounded-md",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-1",children:[(0,s.jsx)("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Progreso"}),(0,s.jsx)("span",{className:"text-xs font-medium text-[#8c52ff] dark:text-[#a67dff]",children:L?"100%":"".concat(q.percentage,"%")})]}),(0,s.jsx)("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:(0,s.jsx)("div",{className:"bg-[#8c52ff] h-2 rounded-full",style:{width:L?"100%":"".concat(q.percentage,"%")}})}),(0,s.jsxs)("div",{className:"mt-2 grid grid-cols-2 gap-2 text-center",children:[(0,s.jsxs)("div",{className:"bg-white dark:bg-gray-800 p-2 rounded",children:[(0,s.jsx)("div",{className:"text-[#8c52ff] dark:text-[#a67dff] font-bold",children:L?n.length:q.assigned}),(0,s.jsx)("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Asignados"})]}),(0,s.jsxs)("div",{className:"bg-white dark:bg-gray-800 p-2 rounded",children:[(0,s.jsx)("div",{className:"text-gray-700 dark:text-gray-300 font-bold",children:q.total}),(0,s.jsx)("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Total"})]})]})]})]})]})}),(0,s.jsxs)("div",{className:"w-full md:w-3/4",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,s.jsxs)("h3",{className:"font-medium text-gray-700 dark:text-gray-300",children:["Permisos"," ","all"!==R&&"- ".concat((null===(r=F[R])||void 0===r?void 0:r.nombre)||"Otros")]}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(o.A,{className:"h-4 w-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),(0,s.jsx)(N.p,{placeholder:"Buscar permisos...",value:E,onChange:e=>S(e.target.value),className:"pl-9 w-full md:w-64 border-gray-300 dark:border-gray-600"})]})]}),O?(0,s.jsxs)("div",{className:"flex justify-center items-center h-40",children:[(0,s.jsx)(x.P.div,{animate:{rotate:360},transition:{duration:1.5,repeat:Number.POSITIVE_INFINITY,ease:"linear"},children:(0,s.jsx)(c.A,{className:"h-8 w-8 text-[#8c52ff] dark:text-[#a67dff]"})}),(0,s.jsx)("span",{className:"ml-2 text-[#8c52ff] dark:text-[#a67dff]",children:"Cargando permisos..."})]}):(0,s.jsx)(s.Fragment,{children:0===U.length?(0,s.jsxs)("div",{className:"text-center py-8 bg-gray-50 dark:bg-gray-800/50 rounded-lg",children:[(0,s.jsx)(o.A,{className:"h-10 w-10 text-gray-400 mx-auto mb-2"}),(0,s.jsx)("p",{className:"text-gray-500 dark:text-gray-400",children:"No se encontraron permisos con ese filtro"}),(0,s.jsx)(h.$,{variant:"link",className:"text-[#8c52ff] dark:text-[#a67dff] mt-1",onClick:()=>{S(""),T("all")},children:"Limpiar filtros"})]}):(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:Array.isArray(U)&&U.length>0?U.map(e=>{var r,t;let a="other";for(let r in F)if("other"!==r&&(null==e?void 0:null===(t=e.nombre)||void 0===t?void 0:t.startsWith(r))){a=r;break}let o=L||Array.isArray(A)&&A.includes(e.id_permiso);return(0,s.jsxs)("div",{className:(0,b.cn)("flex items-center p-3 rounded-md border",o?"bg-[#f0ebff] border-[#d9c6ff] dark:bg-[#4d2994]/30 dark:border-[#6b42c9]":"bg-white border-gray-200 dark:bg-gray-800 dark:border-gray-700"),children:[(0,s.jsx)(v,{id:"permiso-".concat(e.id_permiso),checked:o,onCheckedChange:()=>B(e.id_permiso),disabled:L||O,className:(0,b.cn)(L&&"opacity-60",o&&"bg-[#8c52ff] border-[#8c52ff] dark:bg-[#8c52ff] dark:border-[#8c52ff]")}),(0,s.jsxs)("div",{className:"ml-3 flex-1",children:[(0,s.jsx)("label",{htmlFor:"permiso-".concat(e.id_permiso),className:(0,b.cn)("text-sm font-medium cursor-pointer",L&&"cursor-not-allowed"),children:e.nombre}),(0,s.jsx)(k.E,{variant:"outline",className:"ml-2 text-xs bg-white text-[#8c52ff] border-[#d9c6ff] dark:bg-[#4d2994]/30 dark:text-[#a67dff] dark:border-[#6b42c9]",children:(null===(r=F[a])||void 0===r?void 0:r.nombre)||"Otro"})]})]},e.id_permiso)}):(0,s.jsx)("div",{className:"col-span-2 text-center py-4",children:(0,s.jsx)("p",{className:"text-gray-500",children:"No se encontraron permisos"})})})})]})]})]}),!d&&!O&&(0,s.jsxs)("div",{className:"text-center py-12 bg-[#f0ebff] dark:bg-[#4d2994]/20 rounded-lg",children:[(0,s.jsx)(c.A,{className:"h-12 w-12 text-[#8c52ff] dark:text-[#a67dff] mx-auto mb-3"}),(0,s.jsx)("h3",{className:"text-lg font-medium text-[#8c52ff] dark:text-[#a67dff] mb-1",children:"Selecciona un Rol"}),(0,s.jsx)("p",{className:"text-gray-600 dark:text-gray-400 max-w-md mx-auto",children:"Selecciona un rol del men\xfa desplegable para ver y administrar sus permisos"})]})]})})]})}var M=t(28555),U=t(74466),q=t(25318);let W=M.Kq,$=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)(M.LM,{ref:r,className:(0,b.cn)("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...a})});$.displayName=M.LM.displayName;let G=(0,U.F)("group pointer-events-auto relative flex w-full items-center justify-between space-x-2 overflow-hidden rounded-md border p-4 pr-6 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),Y=a.forwardRef((e,r)=>{let{className:t,variant:a,...o}=e;return(0,s.jsx)(M.bL,{ref:r,className:(0,b.cn)(G({variant:a}),t),...o})});Y.displayName=M.bL.displayName,a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)(M.rc,{ref:r,className:(0,b.cn)("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium transition-colors hover:bg-secondary focus:outline-none focus:ring-1 focus:ring-ring disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...a})}).displayName=M.rc.displayName;let Z=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)(M.bm,{ref:r,className:(0,b.cn)("absolute right-1 top-1 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-1 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...a,children:(0,s.jsx)(q.A,{className:"h-4 w-4"})})});Z.displayName=M.bm.displayName;let X=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)(M.hE,{ref:r,className:(0,b.cn)("text-sm font-semibold [&+div]:text-xs",t),...a})});X.displayName=M.hE.displayName;let H=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)(M.VY,{ref:r,className:(0,b.cn)("text-sm opacity-90",t),...a})});function K(){let{toasts:e}=P();return(0,s.jsxs)(W,{children:[e.map(function(e){let{id:r,title:t,description:a,action:o,...i}=e;return(0,s.jsxs)(Y,{...i,children:[(0,s.jsxs)("div",{className:"grid gap-1",children:[t&&(0,s.jsx)(X,{children:t}),a&&(0,s.jsx)(H,{children:a})]}),o,(0,s.jsx)(Z,{})]},r)}),(0,s.jsx)($,{})]})}function Q(){return(0,s.jsx)("div",{className:"flex-1 overflow-auto bg-white dark:bg-gray-900",children:(0,s.jsxs)("div",{className:"container py-6",children:[(0,s.jsx)(B,{}),(0,s.jsx)(K,{})]})})}H.displayName=M.VY.displayName},70466:(e,r,t)=>{"use strict";t.d(r,{TR:()=>g,bq:()=>f,eb:()=>y,gC:()=>h,l6:()=>c,s3:()=>m,yv:()=>u});var s=t(95155),a=t(12115),o=t(38550),i=t(79556),n=t(77381),l=t(10518),d=t(19433);let c=o.bL,m=o.YJ,u=o.WT,f=a.forwardRef((e,r)=>{let{className:t,children:a,...n}=e;return(0,s.jsxs)(o.l9,{ref:r,className:(0,d.cn)("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...n,children:[a,(0,s.jsx)(o.In,{asChild:!0,children:(0,s.jsx)(i.A,{className:"h-4 w-4 opacity-50"})})]})});f.displayName=o.l9.displayName;let p=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)(o.PP,{ref:r,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",t),...a,children:(0,s.jsx)(n.A,{className:"h-4 w-4"})})});p.displayName=o.PP.displayName;let x=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)(o.wn,{ref:r,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",t),...a,children:(0,s.jsx)(i.A,{className:"h-4 w-4"})})});x.displayName=o.wn.displayName;let h=a.forwardRef((e,r)=>{let{className:t,children:a,position:i="popper",...n}=e;return(0,s.jsx)(o.ZL,{children:(0,s.jsxs)(o.UC,{ref:r,className:(0,d.cn)("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]","popper"===i&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:i,...n,children:[(0,s.jsx)(p,{}),(0,s.jsx)(o.LM,{className:(0,d.cn)("p-1","popper"===i&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:a}),(0,s.jsx)(x,{})]})})});h.displayName=o.UC.displayName;let g=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)(o.JU,{ref:r,className:(0,d.cn)("px-2 py-1.5 text-sm font-semibold",t),...a})});g.displayName=o.JU.displayName;let y=a.forwardRef((e,r)=>{let{className:t,children:a,...i}=e;return(0,s.jsxs)(o.q7,{ref:r,className:(0,d.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...i,children:[(0,s.jsx)("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(o.VF,{children:(0,s.jsx)(l.A,{className:"h-4 w-4"})})}),(0,s.jsx)(o.p4,{children:a})]})});y.displayName=o.q7.displayName,a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)(o.wv,{ref:r,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",t),...a})}).displayName=o.wv.displayName},87844:(e,r,t)=>{Promise.resolve().then(t.bind(t,61668))}},e=>{var r=r=>e(e.s=r);e.O(0,[9971,668,3249,1745,7659,8441,1684,7358],()=>r(87844)),_N_E=e.O()}]);