(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3420],{13619:(e,r,t)=>{"use strict";t.d(r,{E:()=>i});var s=t(95155);t(12115);var a=t(74466),o=t(19433);let n=(0,a.F)("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function i(e){let{className:r,variant:t,...a}=e;return(0,s.jsx)("div",{className:(0,o.cn)(n({variant:t}),r),...a})}},13800:(e,r,t)=>{"use strict";t.d(r,{BT:()=>d,Wu:()=>c,ZB:()=>l,Zp:()=>n,aR:()=>i});var s=t(95155),a=t(12115),o=t(19433);let n=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)("div",{ref:r,className:(0,o.cn)("rounded-xl border bg-card text-card-foreground shadow",t),...a})});n.displayName="Card";let i=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)("div",{ref:r,className:(0,o.cn)("flex flex-col space-y-1.5 p-6",t),...a})});i.displayName="CardHeader";let l=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)("div",{ref:r,className:(0,o.cn)("font-semibold leading-none tracking-tight",t),...a})});l.displayName="CardTitle";let d=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)("div",{ref:r,className:(0,o.cn)("text-sm text-muted-foreground",t),...a})});d.displayName="CardDescription";let c=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)("div",{ref:r,className:(0,o.cn)("p-6 pt-0",t),...a})});c.displayName="CardContent",a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)("div",{ref:r,className:(0,o.cn)("flex items-center p-6 pt-0",t),...a})}).displayName="CardFooter"},19433:(e,r,t)=>{"use strict";t.d(r,{cn:()=>o});var s=t(52596),a=t(39688);function o(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return(0,a.QP)((0,s.$)(r))}},31583:(e,r,t)=>{Promise.resolve().then(t.bind(t,52255))},31670:(e,r,t)=>{"use strict";t.d(r,{A:()=>s});let s="https://back.digimediamkt.com"},49295:(e,r,t)=>{"use strict";t.d(r,{w:()=>i});var s=t(95155),a=t(12115),o=t(87489),n=t(19433);let i=a.forwardRef((e,r)=>{let{className:t,orientation:a="horizontal",decorative:i=!0,...l}=e;return(0,s.jsx)(o.b,{ref:r,decorative:i,orientation:a,className:(0,n.cn)("shrink-0 bg-border","horizontal"===a?"h-[1px] w-full":"h-full w-[1px]",t),...l})});i.displayName=o.b.displayName},52255:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>P});var s=t(95155),a=t(12115),o=t(35695),n=t(8376),i=t(24371),l=t(37648),d=t(12543),c=t(19637),m=t(50172),x=t(38224),u=t(24752),h=t.n(u),p=t(23464),f=t(31670),b=t(13800),g=t(13619),j=t(49295),v=t(80244),N=t(19433);let w=a.forwardRef((e,r)=>{let{className:t,children:a,...o}=e;return(0,s.jsxs)(v.bL,{ref:r,className:(0,N.cn)("relative overflow-hidden",t),...o,children:[(0,s.jsx)(v.LM,{className:"h-full w-full rounded-[inherit]",children:a}),(0,s.jsx)(y,{}),(0,s.jsx)(v.OK,{})]})});w.displayName=v.bL.displayName;let y=a.forwardRef((e,r)=>{let{className:t,orientation:a="vertical",...o}=e;return(0,s.jsx)(v.VM,{ref:r,orientation:a,className:(0,N.cn)("flex touch-none select-none transition-colors","vertical"===a&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===a&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",t),...o,children:(0,s.jsx)(v.lr,{className:"relative flex-1 rounded-full bg-border"})})});y.displayName=v.VM.displayName;var E=t(11133),A=t(25318),C=t(50594),k=t(73672),_=t(79971);function B(e){let{isVisible:r,onClose:t,id_modal_email:o}=e,[n,i]=(0,a.useState)(""),[l,d]=(0,a.useState)(!1);function c(){i(""),d(!1),t()}if((0,a.useEffect)(()=>{r&&i("")},[r]),!r)return null;async function x(){if(!n.trim()){h().fire({title:"Campo requerido",text:"Por favor, describe el error antes de enviar.",icon:"warning",confirmButtonText:"Entendido"});return}try{d(!0);let e=await p.A.put("".concat(f.A,"/api/modales/reportar_error/").concat(o),{error:n},{headers:{Authorization:"Bearer ".concat((0,_.getCookie)("token")),Accept:"application/json","Content-Type":"application/json"}});200===e.status?(await h().fire({title:"Error Reportado",text:"El error ha sido reportado exitosamente.",icon:"success",timer:2e3,timerProgressBar:!0,showConfirmButton:!1}),c(),window.location.reload()):h().fire({title:"Error",text:e.message||"No se pudo reportar el error.",icon:"error",confirmButtonText:"OK"})}catch(e){h().fire({title:"Error",text:"Ocurri\xf3 un error inesperado.",icon:"error",confirmButtonText:"OK"}),console.log(e)}finally{d(!1)}}return(0,s.jsx)("div",{className:"fixed inset-0 z-50 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4",children:(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md overflow-hidden animate-in fade-in zoom-in duration-300",onClick:e=>e.stopPropagation(),children:[(0,s.jsxs)("div",{className:"flex items-center justify-between bg-slate-50 px-6 py-4 border-b border-slate-100",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("div",{className:"bg-red-100 p-2 rounded-full mr-3",children:(0,s.jsx)(E.A,{className:"h-5 w-5 text-red-600"})}),(0,s.jsx)("h2",{className:"text-lg font-semibold text-slate-800",children:"Reportar Error de Email"})]}),(0,s.jsx)("button",{onClick:c,className:"text-slate-400 hover:text-slate-600 transition-colors p-1 rounded-full hover:bg-red-400","aria-label":"Cerrar",children:(0,s.jsx)(A.A,{className:"h-5 w-5"})})]}),(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsx)("div",{className:"mb-6 bg-blue-50 rounded-lg p-4 border border-blue-100",children:(0,s.jsxs)("div",{className:"flex",children:[(0,s.jsx)(C.A,{className:"h-5 w-5 text-blue-600 mt-0.5 mr-3 flex-shrink-0"}),(0,s.jsxs)("div",{className:"text-sm text-blue-700",children:[(0,s.jsx)("p",{className:"font-medium mb-1",children:"Recomendaci\xf3n:"}),(0,s.jsx)("p",{children:"Revisa el correo de DigiMedia. Recibir\xe1s una notificaci\xf3n si el email no existe o no se pudo entregar. Si no hay notificaci\xf3n, el correo probablemente lleg\xf3 a la bandeja de entrada o spam del destinatario."})]})]})}),(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("label",{htmlFor:"error-description",className:"block text-sm font-medium text-slate-700 mb-2",children:"Descripci\xf3n del error"}),(0,s.jsx)("textarea",{id:"error-description",value:n,onChange:function(e){i(e.target.value)},placeholder:"Describe el problema que has encontrado...",className:"w-full px-4 py-3 rounded-lg border border-slate-200 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition-all duration-200 min-h-[120px] text-slate-800"})]})]}),(0,s.jsxs)("div",{className:"px-6 py-4 bg-slate-50 border-t border-slate-100 flex justify-end gap-3",children:[(0,s.jsxs)("button",{type:"button",onClick:x,disabled:l,className:"px-5 py-2 rounded-lg bg-blue-600 text-white hover:bg-blue-700 transition-colors duration-200 text-sm font-medium flex items-center",children:[l?(0,s.jsx)(m.A,{className:"animate-spin h-4 w-4 mr-2"}):(0,s.jsx)(k.A,{className:"h-4 w-4 mr-2"}),l?"Enviando...":"Enviar reporte"]}),(0,s.jsx)("button",{type:"button",onClick:c,disabled:l,className:"px-4 py-2 bg-red-500 rounded-lg border border-slate-200 text-white hover:bg-red-400 transition-colors duration-200 text-sm font-medium",children:"Cancelar"})]})]})})}var R=t(94063);function T(e){let{isVisible:r,onClose:t,id_modal_wat:o}=e,[l,d]=(0,a.useState)(!0),[c,x]=(0,a.useState)(""),[u,b]=(0,a.useState)(!1);function g(e){d("true"===e.target.value)}if((0,a.useEffect)(()=>{r&&(x(""),d(!0))},[r]),!r)return null;async function j(){if(l)try{b(!0);let e=await p.A.put("".concat(f.A,"/api/modales/estado_wat/").concat(o),{estado:1},{headers:{Authorization:"Bearer ".concat((0,_.getCookie)("token")),Accept:"application/json","Content-Type":"application/json"}});200===e.status?(await h().fire({title:"Estado Correcto Enviado",text:"El estado del mensaje ha sido actualizado a exitoso",icon:"success",confirmButtonText:"Entendido",confirmButtonColor:"#10b981"}),v(),window.location.reload()):h().fire({title:"Error",text:"No se pudo cambiar el estado del mensaje.",icon:"error",confirmButtonText:"OK"})}catch(e){h().fire({title:"Error",text:"Ocurri\xf3 un error inesperado.",icon:"error",confirmButtonText:"OK"})}finally{b(!1)}else{if(""===c.trim()){h().fire({title:"Campo requerido",text:"Por favor, describe el error antes de enviar.",icon:"warning",confirmButtonText:"Entendido"});return}try{b(!0);let e=await p.A.put("".concat(f.A,"/api/modales/estado_wat/").concat(o),{error:c,estado:0},{headers:{Authorization:"Bearer ".concat((0,_.getCookie)("token")),Accept:"application/json","Content-Type":"application/json"}});200===e.status?(await h().fire({title:"Error Reportado",text:"El problema ha sido reportado exitosamente.",icon:"success",timer:2e3,timerProgressBar:!0,showConfirmButton:!1}),v(),window.location.reload()):h().fire({title:"Error",text:e.message||"No se pudo reportar el error.",icon:"error",confirmButtonText:"OK"})}catch(e){h().fire({title:"Error",text:"Ocurri\xf3 un error inesperado.",icon:"error",confirmButtonText:"OK"}),console.log(e)}finally{b(!1)}}}function v(){x(""),d(!0),b(!1),t()}return(0,s.jsx)("div",{className:"fixed inset-0 z-50 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4",children:(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md overflow-hidden animate-in fade-in zoom-in duration-300",onClick:e=>e.stopPropagation(),children:[(0,s.jsxs)("div",{className:"flex items-center justify-between px-6 py-4 border-b transition-colors duration-300 ".concat(l?"bg-gradient-to-r from-emerald-50 to-emerald-100 border-emerald-200":"bg-gradient-to-r from-rose-50 to-rose-100 border-rose-200"),children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("div",{className:"p-2 rounded-full mr-3 transition-colors duration-300 ".concat(l?"bg-emerald-100 text-emerald-600":"bg-rose-100 text-rose-600"),children:l?(0,s.jsx)(R.A,{className:"h-5 w-5"}):(0,s.jsx)(E.A,{className:"h-5 w-5"})}),(0,s.jsx)("h2",{className:"text-lg font-semibold text-slate-800",children:"Estado de Mensaje WhatsApp"})]}),(0,s.jsx)("button",{onClick:v,className:"text-slate-400 hover:text-slate-600 transition-colors p-1 rounded-full hover:bg-white/50","aria-label":"Cerrar",children:(0,s.jsx)(A.A,{className:"h-5 w-5"})})]}),(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-3",children:"Selecciona el estado del mensaje:"}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,s.jsxs)("label",{className:"flex items-center justify-center p-4 rounded-lg border-2 cursor-pointer transition-all duration-300 ".concat(l?"bg-emerald-50 border-emerald-500 shadow-sm shadow-emerald-100":"bg-white border-slate-200 hover:border-emerald-200"),children:[(0,s.jsx)("input",{type:"radio",name:"status",value:"true",checked:!0===l,onChange:g,className:"sr-only"}),(0,s.jsxs)("div",{className:"flex flex-col items-center text-center",children:[(0,s.jsx)(n.A,{className:"h-8 w-8 mb-2 ".concat(l?"text-emerald-500":"text-slate-300"," transition-colors duration-300")}),(0,s.jsx)("span",{className:"font-medium ".concat(l?"text-emerald-700":"text-slate-500"," transition-colors duration-300"),children:"Enviado Correctamente"})]})]}),(0,s.jsxs)("label",{className:"flex items-center justify-center p-4 rounded-lg border-2 cursor-pointer transition-all duration-300 ".concat(l?"bg-white border-slate-200 hover:border-rose-200":"bg-rose-50 border-rose-500 shadow-sm shadow-rose-100"),children:[(0,s.jsx)("input",{type:"radio",name:"status",value:"false",checked:!1===l,onChange:g,className:"sr-only"}),(0,s.jsxs)("div",{className:"flex flex-col items-center text-center",children:[(0,s.jsx)(i.A,{className:"h-8 w-8 mb-2 ".concat(l?"text-slate-300":"text-rose-500"," transition-colors duration-300")}),(0,s.jsx)("span",{className:"font-medium ".concat(l?"text-slate-500":"text-rose-700"," transition-colors duration-300"),children:"Reportar Error"})]})]})]})]}),!l&&(0,s.jsxs)("div",{className:"mb-4 animate-in fade-in slide-in-from-top duration-300",children:[(0,s.jsx)("label",{htmlFor:"error-description",className:"block text-sm font-medium text-slate-700 mb-2",children:"Descripci\xf3n del error"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("textarea",{id:"error-description",value:c,onChange:function(e){x(e.target.value)},placeholder:"Describe el problema que has encontrado con el env\xedo del mensaje...",className:"w-full px-4 py-3 rounded-lg border transition-all duration-200 min-h-[120px] text-slate-800 ".concat(c.trim()?"border-rose-300 bg-rose-50 focus:ring-2 focus:ring-rose-200 focus:border-rose-500":"border-slate-200 focus:ring-2 focus:ring-slate-200 focus:border-slate-300")}),(0,s.jsxs)("div",{className:"absolute bottom-3 right-3 text-xs text-slate-400",children:[c.length," caracteres"]})]})]}),(0,s.jsx)("div",{className:"p-4 rounded-lg mb-4 transition-colors duration-300 ".concat(l?"bg-emerald-50 border border-emerald-100 text-emerald-800":"bg-rose-50 border border-rose-100 text-rose-800"),children:(0,s.jsxs)("div",{className:"flex",children:[l?(0,s.jsx)(n.A,{className:"h-5 w-5 text-emerald-500 mt-0.5 mr-3 flex-shrink-0"}):(0,s.jsx)(E.A,{className:"h-5 w-5 text-rose-500 mt-0.5 mr-3 flex-shrink-0"}),(0,s.jsxs)("div",{className:"text-sm",children:[(0,s.jsx)("p",{className:"font-medium mb-1",children:l?"Mensaje enviado correctamente":"Reportando un problema"}),(0,s.jsx)("p",{children:l?"Al confirmar, est\xe1s indicando que el mensaje de WhatsApp se envi\xf3 sin problemas al destinatario.":"Al reportar un error, ayudas a identificar problemas en el sistema de mensajer\xeda."})]})]})})]}),(0,s.jsxs)("div",{className:"px-6 py-4 border-t flex justify-end gap-3 transition-colors duration-300 ".concat(l?"bg-emerald-50 border-emerald-100":"bg-rose-50 border-rose-100"),children:[(0,s.jsx)("button",{type:"button",onClick:v,disabled:u,className:"px-4 py-2 rounded-lg border border-slate-200 bg-white text-slate-700 hover:bg-slate-50 transition-colors duration-200 text-sm font-medium",children:"Cancelar"}),(0,s.jsxs)("button",{type:"button",onClick:j,disabled:u,className:"px-5 py-2 rounded-lg text-white transition-all duration-300 text-sm font-medium flex items-center ".concat(l?"bg-emerald-600 hover:bg-emerald-700 shadow-sm shadow-emerald-200":"bg-rose-600 hover:bg-rose-700 shadow-sm shadow-rose-200"," ").concat(u?"opacity-70 cursor-not-allowed":""),children:[u?(0,s.jsx)(m.A,{className:"animate-spin h-4 w-4 mr-2"}):l?(0,s.jsx)(n.A,{className:"h-4 w-4 mr-2"}):(0,s.jsx)(E.A,{className:"h-4 w-4 mr-2"}),u?"Procesando...":l?"Confirmar env\xedo exitoso":"Reportar problema"]})]})]})})}function O(){let[e,r]=(0,a.useState)({mails:[],wats:[]}),[t,u]=(0,a.useState)(!0),v=(0,o.useSearchParams)(),N=(0,o.useRouter)(),y=v.get("id_modal");console.log("id_modal extra\xeddo:",y);let[E,A]=(0,a.useState)(!1),[C,k]=(0,a.useState)(!1),[R,O]=(0,a.useState)(null),[P,S]=(0,a.useState)(!1),[z,K]=(0,a.useState)(!1),[M,D]=(0,a.useState)(null);async function W(e){try{A(!0);let r=await p.A.get("".concat(f.A,"/api/modales/send_mail/").concat(e),{headers:{Authorization:"Bearer ".concat((0,_.getCookie)("token"))}});200===r.status?(await h().fire({title:"Correo Enviado Correctamente",text:"Es recomendable que revises el correo de DIGIMEDIA para ver si este correo existe.",icon:"success",confirmButtonText:"OK"}),window.location.reload()):(h().fire({title:"Error",text:"No se pudo enviar el mensaje.",icon:"error",confirmButtonText:"OK"}),console.log(r.message))}catch(e){h().fire({title:"Error",text:e.message,icon:"error",confirmButtonText:"OK"}),console.log(e.message)}finally{A(!1)}}async function q(e){try{S(!0),window.open("".concat(f.A,"/api/modales/send_wat/").concat(e),"_blank")}catch(e){h().fire({title:"Error",text:"No se pudo enviar el mensaje.",icon:"error",confirmButtonText:"OK"})}finally{S(!1)}}(0,a.useEffect)(()=>{(async()=>{if(!y){u(!1);return}try{u(!0);let e=await p.A.get("".concat(f.A,"/api/modales/modals_emails_wats/").concat(y),{headers:{Authorization:"Bearer ".concat((0,_.getCookie)("token"))}});200===e.status?r(e.data):(console.error("Error axios: ",e.status),h().fire({title:"Error",text:"Ocurri\xf3 un error inesperado.",icon:"error",confirmButtonText:"OK"}))}catch(e){h().fire({title:"Error",text:"Ocurri\xf3 un error inesperado.",icon:"error",confirmButtonText:"OK"})}finally{u(!1)}})()},[y]);let F=(e,r)=>1!=e||r&&""!==r?1==e&&r?(0,s.jsxs)(g.E,{variant:"destructive",children:[(0,s.jsx)(i.A,{className:"w-3 h-3 mr-1"})," Error de Env\xedo"]}):0==e?(0,s.jsxs)(g.E,{variant:"outline",className:"bg-yellow-100 text-yellow-800 hover:bg-yellow-200",children:[(0,s.jsx)(l.A,{className:"w-3 h-3 mr-1"})," Pendiente de Env\xedo"]}):void 0:(0,s.jsxs)(g.E,{variant:"success",className:"bg-green-100 text-green-800 hover:bg-green-200",children:[(0,s.jsx)(n.A,{className:"w-3 h-3 mr-1"})," Enviado Correctamente"]}),V=(e,r)=>1!=e||r?r?(0,s.jsxs)(g.E,{variant:"destructive",children:[(0,s.jsx)(i.A,{className:"w-3 h-3 mr-1"})," Error de Env\xedo"]}):0!=e||r?void 0:(0,s.jsxs)(g.E,{variant:"outline",className:"bg-yellow-100 text-yellow-800 hover:bg-yellow-200",children:[(0,s.jsx)(l.A,{className:"w-3 h-3 mr-1"})," Pendiente de Env\xedo"]}):(0,s.jsxs)(g.E,{variant:"success",className:"bg-green-100 text-green-800 hover:bg-green-200",children:[(0,s.jsx)(n.A,{className:"w-3 h-3 mr-1"})," Enviado Correctamente"]}),Z=e=>{if(!e)return"";let r=new Date(e);return new Intl.DateTimeFormat("es-ES",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(r)};return(0,s.jsxs)("div",{className:"container mx-auto p-4 space-y-6",children:[(0,s.jsxs)("button",{className:"flex items-center gap-2  hover:bg-[#7b45e0]  bg-[#8c52ff] text-white px-4 py-2 rounded-lg  transition-all duration-300 shadow-sm group",onClick:()=>N.push("/dashboard/modales/"),children:[(0,s.jsx)(d.A,{className:"w-5 h-5 transition-transform group-hover:-translate-x-1"}),"Volver a la lista"]}),(0,s.jsx)("h1",{className:"text-2xl font-bold text-center",children:"Detalles de Comunicaciones"}),t?(0,s.jsx)("div",{className:"flex justify-center items-center h-40",children:(0,s.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,s.jsx)("div",{className:"animate-spin h-8 w-8 border-4 border-primary border-t-transparent rounded-full"}),(0,s.jsx)("p",{children:"Cargando datos..."})]})}):(0,s.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,s.jsxs)(b.Zp,{className:"shadow-md hover:shadow-lg transition-shadow",children:[(0,s.jsx)(b.aR,{className:"bg-blue-50 rounded-t-lg",children:(0,s.jsxs)(b.ZB,{className:"flex items-center gap-2 text-blue-700",children:[(0,s.jsx)(c.A,{className:"h-5 w-5"}),"Correos Electr\xf3nicos Enviados"]})}),(0,s.jsx)(b.Wu,{className:"p-0",children:(0,s.jsx)(w,{className:"h-[400px] p-4",children:e.mails.map((r,t)=>{let a=e.mails.slice(0,t).some(e=>0==e.estado);return(0,s.jsxs)("div",{className:"border rounded-lg p-4 hover:bg-gray-50 hover:text-black transition-colors mb-4",children:[(0,s.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,s.jsxs)("h3",{className:"font-medium",children:["Email #",r.number_message]}),F(r.estado,r.error)]}),(0,s.jsx)(j.w,{className:"my-2"}),(0,s.jsxs)("div",{className:"space-y-1 text-sm flex justify-between",children:[r.error&&(0,s.jsxs)("div",{className:"text-red-600 bg-red-50 p-2 rounded-md mb-2",children:[(0,s.jsx)("span",{className:"font-semibold",children:"Error:"})," ",r.error]}),0!=r.estado&&(0,s.jsxs)("div",{className:"flex items-center gap-1 text-gray-600 mt-1",children:[(0,s.jsx)(l.A,{className:"h-4 w-4"}),(0,s.jsxs)("span",{children:["Enviado el ",Z(r.fecha)]})]}),0==r.estado&&(0,s.jsx)("div",{children:(0,s.jsx)("button",{title:a?"Primero debes enviar los correos anteriores":"Enviar Mensaje de Email",onClick:()=>!a&&W(r.id_modal_email),className:"mx-auto flex justify-center mt-1 py-2 px-4 rounded-lg text-center text-sm ".concat(a?"bg-gray-400 cursor-not-allowed":"bg-purple-700 text-white"),disabled:a||E,children:a?"Pendiente anterior":E?(0,s.jsx)(m.A,{className:"animate-spin h-4 w-4 mx-auto"}):"Enviar Email"})}),1!=r.estado||r.error?"":(0,s.jsx)("div",{children:(0,s.jsx)("button",{title:a?"Primero debes enviar los correos anteriores":"Reportar error en el correo Enviado",onClick:()=>!a&&void(O(r.id_modal_email),k(!0)),className:"mx-auto mt-1 py-2 px-4 rounded-lg text-center text-sm ".concat(a?"bg-gray-400 cursor-not-allowed":"bg-red-700 text-white"),children:"Reportar error"})})]})]},t)})})})]}),(0,s.jsxs)(b.Zp,{className:"shadow-md hover:shadow-lg transition-shadow",children:[(0,s.jsx)(b.aR,{className:"bg-green-50 rounded-t-lg",children:(0,s.jsxs)(b.ZB,{className:"flex items-center gap-2 text-green-700",children:[(0,s.jsx)(x.A,{className:"h-5 w-5"}),"Mensajes de WhatsApp Enviados"]})}),(0,s.jsx)(b.Wu,{className:"p-0",children:(0,s.jsx)(w,{className:"h-[400px] p-4",children:e.wats&&e.wats.length>0?(0,s.jsx)("div",{className:"space-y-4",children:e.wats.map((r,t)=>{let a=e.wats.slice(0,t).some(e=>!e.error&&0==e.estado);return(0,s.jsxs)("div",{className:"border rounded-lg p-4 hover:bg-gray-50  hover:text-black transition-colors",children:[(0,s.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,s.jsxs)("h3",{className:"font-medium",children:["Mensaje #",r.number_message]}),V(r.estado,r.error)]}),(0,s.jsx)(j.w,{className:"my-2"}),(0,s.jsxs)("div",{className:"space-y-1 text-sm flex justify-between gap-2",children:[r.error&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"text-red-600 bg-red-50 p-2 rounded-md my-2 ",children:[(0,s.jsx)("span",{className:"font-semibold",children:"Error:"})," ",r.error]}),(0,s.jsxs)("div",{className:"flex items-center gap-1 text-gray-600",children:[(0,s.jsx)(l.A,{className:"h-4 w-4"}),(0,s.jsxs)("span",{children:["Reportado el ",Z(r.fecha)]})]})]}),!r.error&&1==r.estado&&(0,s.jsxs)("div",{className:"flex items-center gap-1 text-gray-600",children:[(0,s.jsx)(l.A,{className:"h-4 w-4"}),(0,s.jsxs)("span",{children:["Enviado el ",Z(r.fecha)]})]}),0==r.estado&&!r.error&&(0,s.jsx)("div",{children:(0,s.jsx)("button",{title:a?"Primero debes enviar los mensajes anteriores":"Enviar Mensaje de WhatsApp",onClick:()=>{a||q(r.id_modal_wat)},className:"mx-auto mt-1 py-2 px-4 rounded-lg text-sm ".concat(a?"bg-gray-400 text-black cursor-not-allowed":"bg-purple-600 text-white hover:bg-purple-700"),disabled:a||P,children:a?"Pendiente anterior":"Enviar Mensaje"})}),0!=r.estado||r.error?"":(0,s.jsx)("div",{children:(0,s.jsx)("button",{title:a?"Primero debes enviar los reportar del anterior env\xedo":"Reportar estado de env\xedo",onClick:()=>!a&&void(D(r.id_modal_wat),K(!0)),className:"mx-auto mt-1 py-2 px-4 rounded-lg text-center text-sm ".concat(a?"bg-gray-400 text-black cursor-not-allowed":"bg-blue-400 text-white"),disabled:a,children:"Reportar Estado de Env\xedo"})})]})]},t)})}):(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center h-full text-gray-500 p-6",children:[(0,s.jsx)(x.A,{className:"h-12 w-12 mb-2 text-gray-400"}),(0,s.jsx)("p",{children:"No hay mensajes de WhatsApp para mostrar"})]})})})]}),C&&(0,s.jsx)(B,{id_modal_email:R,isVisible:C,onClose:()=>k(!1)}),z&&(0,s.jsx)(T,{id_modal_wat:M,isVisible:z,onClose:()=>K(!1)})]})]})}let P=()=>(0,s.jsx)(a.Suspense,{fallback:(0,s.jsx)("div",{className:"flex justify-center items-center h-screen text-gray-700",children:(0,s.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,s.jsx)("div",{className:"animate-spin h-8 w-8 border-4 border-primary border-t-transparent rounded-full"}),(0,s.jsx)("p",{children:"Cargando..."})]})}),children:(0,s.jsx)(O,{})})}},e=>{var r=r=>e(e.s=r);e.O(0,[8320,9971,9641,3464,668,141,8441,1684,7358],()=>r(31583)),_N_E=e.O()}]);